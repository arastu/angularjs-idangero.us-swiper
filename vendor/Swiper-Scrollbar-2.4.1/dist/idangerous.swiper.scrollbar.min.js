/*
 * Swiper Scrollbar 2.4.0
 * Plugin for Swiper 2.4+
 *
 * http://www.idangero.us/sliders/swiper/plugins/scrollbar.php
 *
 * Copyright 2010-2014, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under GPL & MIT
 *
 * Released on: January 28, 2014
*/
Swiper.prototype.plugins.scrollbar=function(a,b){function c(a){return document.querySelectorAll?document.querySelectorAll(a):jQuery(a)}function d(c){w=!0,c.preventDefault?c.preventDefault():c.returnValue=!1,g(c),clearTimeout(z),a.setTransition(t,0),t.style.opacity=1,a.setWrapperTransition(100),a.setTransition(u,100),b.onScrollbarDrag&&b.onScrollbarDrag(a)}function e(c){w&&(c.preventDefault?c.preventDefault():c.returnValue=!1,g(c),a.setWrapperTransition(0),a.setTransition(t,0),a.setTransition(u,0),b.onScrollbarDrag&&b.onScrollbarDrag(a))}function f(){w=!1,b.hide&&(clearTimeout(z),z=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3)),b.snapOnRelease&&a.swipeReset()}function g(b){var c=y=0;if(s){var d="touchstart"==b.type||"touchmove"==b.type?b.targetTouches[0].pageX:b.pageX||b.clientX;c=d-a.h.getOffset(t).left-p/2,0>c?c=0:c+p>l&&(c=l-p)}else{var e="touchstart"==b.type||"touchmove"==b.type?b.targetTouches[0].pageY:b.pageY||b.clientY;y=e-a.h.getOffset(t).top-q/2,0>y?y=0:y+q>m&&(y=m-q)}a.setTranslate(u,{x:c,y:y});var f=-c/o,g=-y/o;a.setWrapperTranslate(f,g,0),a.updateActiveSlide(s?f:g)}function h(){u.style.width="",u.style.height="",s?(l=a.h.getWidth(t,!0),n=a.width/(a.h.getWidth(a.wrapper)+a.wrapperLeft+a.wrapperRight),o=n*(l/a.width),p=l*n,u.style.width=p+"px"):(m=a.h.getHeight(t,!0),n=a.height/(a.h.getHeight(a.wrapper)+a.wrapperTop+a.wrapperBottom),o=n*(m/a.height),q=m*n,q>m&&(q=m),u.style.height=q+"px"),r.style.display=n>=1?"none":""}var i=b&&b.container;if(i){var j={hide:!0,draggable:!0,snapOnRelease:!1};b=b||{};for(var k in j)k in b||(b[k]=j[k]);if((document.querySelectorAll||window.jQuery)&&(b.container.nodeType||0!=c(b.container).length)){var l,m,n,o,p,q,r=b.container.nodeType?b.container:c(b.container)[0],s="horizontal"==a.params.mode,t=r,u=document.createElement("div");u.className="swiper-scrollbar-drag",b.draggable&&(u.className+=" swiper-scrollbar-cursor-drag"),t.appendChild(u),b.hide&&(t.style.opacity=0);var v=a.touchEvents;if(b.draggable){var w=!1,x=a.support.touch?t:document;a.h.addEventListener(t,v.touchStart,d,!1),a.h.addEventListener(x,v.touchMove,e,!1),a.h.addEventListener(x,v.touchEnd,f,!1)}var z,A={onFirstInit:function(){h()},onInit:function(){h()},onTouchMoveEnd:function(){b.hide&&(clearTimeout(z),t.style.opacity=1,a.setTransition(t,200))},onTouchEnd:function(){b.hide&&(clearTimeout(z),z=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3))},onSetWrapperTransform:function(c){if(s){var d=c.x*o,e=p;if(d>0){var f=d;d=0,e=p-f}else-d+p>l&&(e=l+d);a.setTranslate(u,{x:-d}),u.style.width=e+"px"}else{var g=c.y*o,h=q;if(g>0){var f=g;g=0,h=q-f}else-g+q>m&&(h=m+g);a.setTranslate(u,{y:-g}),u.style.height=h+"px"}a.params.freeMode&&b.hide&&(clearTimeout(z),t.style.opacity=1,z=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3))},onSetWrapperTransition:function(b){a.setTransition(u,b.duration)},onDestroy:function(){var b=a.support.touch?t:document;a.h.removeEventListener(t,v.touchStart,d,!1),a.h.removeEventListener(b,v.touchMove,e,!1),a.h.removeEventListener(b,v.touchEnd,f,!1)}};return A}}};